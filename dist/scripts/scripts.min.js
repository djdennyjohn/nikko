"use strict";var app=angular.module("app",["ui.router","infinite-scroll","angular.filter","angular-click-outside"]);app.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("app",{url:"/home",templateUrl:"./views/home.html"})}]),app.directive("backgroundImageDirective",[function(){return function(e,t,a){"posterthatismissing.jpg"===a.backgroundImageDirective?t.attr({src:"./Slices/placeholder_for_missing_posters.png",class:"missing-poster"}):t.attr({src:"./Slices/"+a.backgroundImageDirective})}}]),app.filter("cut",[function(){return function(e,t,a,r){if(!e)return"";if(!(a=parseInt(a,10)))return e;if(e.length<=a)return e;if(e=e.substr(0,a),t){var n=e.lastIndexOf(" ");-1!=n&&(e=e.substr(0,n))}return e+(r||" â€¦")}}]),app.factory("dataService",["$http",function(e){return{get:function(t){return e.get("./API/CONTENTLISTINGPAGE-PAGE"+t+".json",{}).then(function(e){return e})}}}]),app.controller("MainCtrl",["$scope","dataService",function(e,t){var a=this;e.card={},e.card.title="test",a.page=1,a.shots=[],a.loadingMore=!1,a.loadMoreShots=function(){if(!(a.loadingMore||a.page>a.totalPages)){a.loadingMore=!0;var e=t.get(a.page);return e.then(function(e){var t=angular.copy(a.shots);t=t.concat(e.data.page["content-items"].content),a.shots=t,a.loadingMore=!1,a.page++},function(){a.loadingMore=!1}),e}},a.initializePagingData=function(){t.get(a.page).then(function(e){a.totalPages=Math.ceil(e.data.page["total-content-items"]/e.data.page["page-size-requested"]),a.loadMoreShots()})},a.initializePagingData()}]),app.controller("SearchCtrl",["$scope","dataService",function(e,t){var a=this;a.searchIndex=[],a.searchResult=[],a.searchMovies=function(){if(a.searchResult=[],0===a.searchText.length)return a.searchResult;for(var e=0;e<a.searchIndex.length;e++)-1!==a.searchIndex[e].name.toLowerCase().indexOf(a.searchText.toLowerCase())&&a.searchResult.push(a.searchIndex[e])},a.buildSearchIndex=function(){for(var e=1;e<=3;e++){t.get(e).then(function(e){var t=angular.copy(a.searchIndex);t=t.concat(e.data.page["content-items"].content),a.searchIndex=t})}},a.buildSearchIndex(),a.closeThis=function(){a.searchResult=[],a.searchText=""}}]);